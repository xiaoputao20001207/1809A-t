(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"02Rw":function(e,t,a){e.exports={container:"container___6w9ax",wrap:"wrap___1nVsK",chat:"chat___2CApf",list:"list___Ci97S"}},NBE2:function(e,t,a){"use strict";a.r(t);a("E3Qs");var n,s=a("I/kE"),c=a("7+KJ"),r=a("Wval"),o=a("T9Mk"),l=a("kNwm"),i=a("02Rw"),u=a.n(i),d=a("ikfJ"),p=["#e21400","#91580f","#f8a700","#f78b00","#58dc00","#287b00","#a8f07a","#4ae8c4","#3b88eb","#3824aa","#a700ff","#d300e7"],j=()=>{var e=Object(o["useState"])([]),t=Object(r["a"])(e,2),a=t[0],i=t[1],j=Object(o["useState"])(""),b=Object(r["a"])(j,2),f=b[0],O=b[1],h=Object(o["useState"])(""),m=Object(r["a"])(h,2),g=m[0],x=m[1],w=Object(o["useState"])(!1),v=Object(r["a"])(w,2),k=v[0],y=v[1],_=Object(o["useRef"])(null),N=Object(o["useRef"])(null);function C(){var e=Math.floor(12*Math.random());return p[e]}function E(e){if(13===e.keyCode){if(!f)return void s["default"].warn("please input your message");console.log("send messages...",a),i([...a,{message:f,username:g}]),n.emit("new message",f)}}function S(e){if(13===e.keyCode){if(!g)return void s["default"].warn("please input your nickName");n.emit("add user",g),y(!0)}}return Object(o["useEffect"])((()=>{var e,t;_.current&&(_.current.scrollTop=null===(e=_.current)||void 0===e?void 0:e.scrollHeight,console.log(_.current.scrollTop,null===(t=_.current)||void 0===t?void 0:t.scrollHeight))}),[a]),Object(o["useEffect"])((()=>{console.log("socket...",n),n||(n=Object(l["io"])("http://10.0.8.17:3000"),n.on("connect",(()=>{console.log("alerady connect"),n.emit("add user",g)})),n.on("new message",(e=>{i((t=>[...t,e]))})),n.on("user joined",(e=>{console.log("data...",e);var t="";1===e.numUsers?t+="there's 1 participant":t+="there are ".concat(e.numUsers," participants"),i((a=>[...a,Object(c["a"])(Object(c["a"])({},e),{},{message:t})]))})))}),[]),Object(d["jsx"])("div",{className:u.a.container,children:k?Object(d["jsxs"])("section",{className:u.a.chat,children:[Object(d["jsx"])("section",{className:u.a.list,ref:_,children:a&&a.map(((e,t)=>Object(d["jsxs"])("p",{children:[Object(d["jsx"])("span",{style:{color:C(),display:"inline-block",margin:"5px 15px",border:"2px solid #000",padding:"3px 7px"},children:e.username}),Object(d["jsx"])("span",{children:e.message})]},t)))}),Object(d["jsx"])("section",{children:Object(d["jsx"])("input",{type:"text",ref:N,value:f,className:u.a.inp,onChange:e=>O(e.target.value),onKeyDown:e=>E(e),placeholder:"\u5929\u9a6c\u884c\u7a7a"})})]}):Object(d["jsxs"])("section",{className:u.a.wrap,children:[Object(d["jsx"])("span",{children:"What's your nickname?"}),Object(d["jsx"])("input",{type:"text",value:g,onChange:e=>x(e.target.value),onKeyDown:e=>S(e),placeholder:"\u8bf7\u8f93\u5165\u6635\u79f0"})]})})};t["default"]=j}}]);